---
import BaseLayout from '../layouts/BaseLayout.astro'
import PostItem from '../components/PostItem.astro'

export function getStaticPaths({paginate}) {
	const allPosts = Astro.fetchContent('./posts/*.md')
	const sortedPosts = allPosts.sort((a, b) => new Date(b.publishedDate).valueOf() - new Date(a.publishedDate).valueOf());
  return paginate(sortedPosts, {pageSize: 5});
}

const {page} = Astro.props
---

<BaseLayout title="OrangeBurrito">
<h1 class="posts-header">The Sacred Texts</h1>
<div class="post-list">
{page.data.map((post) => (
	<PostItem {post}/>
))}
</div>
</BaseLayout>

<style>
	.posts-header {
		position: relative;
		display: inline-block;
		font-weight: normal;
		font-size: clamp(var(--pd15), 4vw, var(--pd2));
		color: var(--accent);
		margin-bottom: clamp(var(--pd2), 4vw, var(--pd3));
	}

	.posts-header::after {
		position: absolute;
		right: 0;
		top: var(--pd025);
		content: '____';
		color: rgba(0,0,0,0);
		border-bottom: 3.5px solid var(--accent);
	}
</style>