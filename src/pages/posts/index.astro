---
import { type Languages, useTranslations } from '../../ts/i18n';
import { getCollection } from "astro:content"
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostItem from '../../components/PostItem.astro';

const lang = (Astro.cookies.get('language')?.value ?? 'en') as Languages
const t = useTranslations(lang)

let posts = await getCollection("posts")
posts = posts.sort((a, b) => b.data.publishedDate.getTime() - a.data.publishedDate.getTime())
---


<BaseLayout title="Blogposts">
    <h1 class="page-header">{t('title.posts')}</h1>
    <div class="posts">
        {posts.map((post) => (
            <PostItem {post}/>
        ))}
    </div>
</BaseLayout>

<style>
    .posts {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
    }
</style>